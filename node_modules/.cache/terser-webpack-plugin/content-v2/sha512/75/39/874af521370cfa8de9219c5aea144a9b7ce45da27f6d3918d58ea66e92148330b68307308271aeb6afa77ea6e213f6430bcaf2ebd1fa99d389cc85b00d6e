{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{556:function(s,a,e){\"use strict\";e.r(a);var t=e(3),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"h2\",{attrs:{id:\"问题一\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题一\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"问题一：\")])]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"You do not have the m2crypto library installed preventing certificate extraction. Please read the Cuckoo documentation on installing m2crypto (you need SWIG installed and then pip install m2crypto==0.24.0)!\")])]),s._v(\" \"),a(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"使用pip命令安装m2crypto\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"pip \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"m2crypto\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.24\")]),s._v(\".0  \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 此命令安装大概率会报错\")]),s._v(\"\\n\\npip \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" m2crypto          \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 直接安装最新版\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"问题二\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题二\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"问题二：\")])]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"It appears that you haven't loaded any Cuckoo Signatures. Signatures are highly recommended and improve & enrich the information extracted during an analysis. They also make up for the analysis score that you see in the Web Interface - so, pretty important!\")])]),s._v(\" \"),a(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"cuckoo community\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"## 如果网速较慢，建议使用代理将 master.tar.gz 先下载下来，然后再执行以下命令\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"## 地址：https://github.com/cuckoosandbox/community/archive/master.tar.gz\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# cuckoo community --file /home/master.tar.gz\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"问题三\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题三\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"问题三：\")])]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v('2020-12-20 20:19:31,634 [cuckoo.core.plugins] ERROR: Failed to run the processing module \"Static\" for task #28: Traceback (most recent call last): File \"/usr/local/lib/python2.7/dist-packages/cuckoo/core/plugins.py\", line 246, in process data = current.run() File \"/usr/local/lib/python2.7/dist-packages/cuckoo/processing/static.py\", line 1075, in run static.update(PortableExecutable(f.file_path).run()) File \"/usr/local/lib/python2.7/dist-packages/cuckoo/processing/static.py\", line 317, in run results[\"signature\"] = self._get_signature() File \"/usr/local/lib/python2.7/dist-packages/cuckoo/processing/static.py\", line 279, in _get_signature \"locality\": subject.L, File \"/usr/lib/python2.7/dist-packages/M2Crypto/X509.py\", line 321, in __getattr__ return util.py3str(m2.x509_name_by_nid(self.x509_name, self.nid[attr])) File \"/usr/lib/python2.7/dist-packages/M2Crypto/util.py\", line 66, in py3str raise TypeError(\\'No string argument provided\\') TypeError: No string argument provided')])]),s._v(\" \"),a(\"p\",[s._v(\"这个问题出现是由于m2crypto安装的版本过高，官网指定版本为 \"),a(\"code\",[s._v(\"m2crypto==0.24.0\")])]),s._v(\" \"),a(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"下载deb安装包和依赖包安装\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"apt\")]),s._v(\" remove python-m2crypto     \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 卸载通过apt安装的m2crypto\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" pip uninstall m2crypto         \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 卸载通过pip安装的m2crypto\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"## 以上两个命令都执行一下\")]),s._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"wget\")]),s._v(\" http://security.debian.org/debian-security/pool/updates/main/o/openssl1.0/libssl1.0.2_1.0.2u-1~deb9u3_amd64.deb    \\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# m2crypto所需的依赖包libssl1.0.2_1.0.2u-1~deb9u3_amd64.deb\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"wget\")]),s._v(\" http://ftp.br.debian.org/debian/pool/main/m/m2crypto/python-m2crypto_0.24.0-1.1_amd64.deb\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 0.24.0版本的m2crypto\")]),s._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" dpkg \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-i\")]),s._v(\" python-m2crypto_0.24.0-1.1_amd64.deb\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" dpkg \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-i\")]),s._v(\" libssl1.0.2_1.0.2u-1~deb9u3_amd64.deb\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 为了避免更新，需要锁定版本为0.24.0\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" apt-mark hold python-m2crypto\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"问题四\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题四\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"问题四：\")])]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"guest端的Windows7虚拟机网络配置为host-only后无法访问网络，但是windows7虚拟机可以与Ubuntu宿主机相互ping通。\")])]),s._v(\" \"),a(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),a(\"ol\",[a(\"li\",[a(\"strong\",[s._v(\"开启ip转发\")])])]),s._v(\" \"),a(\"p\",[s._v(\"编辑 \"),a(\"code\",[s._v(\"/etc/sysctl.conf\")]),s._v(\"，\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vim\")]),s._v(\" /etc/sysctl.conf\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[s._v(\"找到 \"),a(\"code\",[s._v(\"net.ipv4.ip_forward=1\")]),s._v(\" 去掉注释，保存，再执行以下命令使配置生效\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sysctl\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-p\")]),s._v(\" /etc/sysctl.conf\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"2\"}},[a(\"li\",[a(\"strong\",[s._v(\"需要配置iptables转发规则（临时生效）\")])])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-i\")]),s._v(\"\\niptables \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-A\")]),s._v(\" FORWARD \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-o\")]),s._v(\" eth0 \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-i\")]),s._v(\" vboxnet0 \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-s\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"192.168\")]),s._v(\".56.0/24 \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-m\")]),s._v(\" conntrack \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"--ctstate\")]),s._v(\" NEW \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-j\")]),s._v(\" ACCEPT\\niptables \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-A\")]),s._v(\" FORWARD \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-m\")]),s._v(\" conntrack \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"--ctstate\")]),s._v(\" ESTABLISHED,RELATED \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-j\")]),s._v(\" ACCEPT\\niptables \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-A\")]),s._v(\" POSTROUTING \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-t\")]),s._v(\" nat \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-j\")]),s._v(\" MASQUERADE\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\")])]),a(\"p\",[s._v(\"配置完成后，guest端的windows7虚拟机是可以正常访问网络的，但是host端的Ubuntu访问网络会出现问题，这个是由于DNS的配置问题，修改 \"),a(\"code\",[s._v(\"/etc/resolv.conf\")]),s._v(\"，将 \"),a(\"code\",[s._v(\"nameserver 127.0.0.53\")]),s._v(\" 改为 \"),a(\"code\",[s._v(\"nameserver 114.114.114.114\")]),s._v(\"，保存后即可正常访问网络。\")]),s._v(\" \"),a(\"ol\",{attrs:{start:\"3\"}},[a(\"li\",[a(\"strong\",[s._v(\"持久化iptables转发规则，使用iptables-persistent工具可实现\")])])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"apt-get\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" iptables-persistent\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" netfilter-persistent save\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" netfilter-persistent reload\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"enable\")]),s._v(\" netfilter-persistent.service\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"## 说明\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 保存的规则文件路径如下\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#/etc/iptables/rules.v4\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#/etc/iptables/rules.v6\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"4\"}},[a(\"li\",[a(\"strong\",[s._v(\"解决dns覆盖写入127.0.0.53的问题\")])])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl stop systemd-resolved\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl disable systemd-resolved\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"apt\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" unbound\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rm\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-rf\")]),s._v(\" /etc/resolv.conf\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vim\")]),s._v(\"  /etc/NetworkManager/NetworkManager.conf\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"p\",[s._v(\"在[main]下面添加下面一行：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"dns\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"unbound\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"4\"}},[a(\"li\",[a(\"strong\",[s._v(\"再重启即可\")])])]),s._v(\" \"),a(\"h2\",{attrs:{id:\"问题五\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题五\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"问题五：\")])]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"2020-12-21 08:58:46,225 [cuckoo] ERROR: The maximum number of open files is low (4096). If you do not increase it, you may run into errors later on. 2020-12-21 08:58:46,225 [cuckoo] ERROR: See also: https://cuckoo.sh/docs/faq/index.html#ioerror-errno-24-too-many-open-files\")])]),s._v(\" \"),a(\"p\",[s._v(\"解决方法\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"strong\",[s._v(\"增加文件限制\")])])]),s._v(\" \"),a(\"p\",[s._v(\"查看当前文件数量限制：\"),a(\"code\",[s._v(\"ulimit -n\")])]),s._v(\" \"),a(\"ol\",[a(\"li\",[s._v(\"修改 \"),a(\"code\",[s._v(\"/etc/systemd/user.conf\")]),s._v(\" 和  \"),a(\"code\",[s._v(\"/etc/systemd/system.conf\")])])]),s._v(\" \"),a(\"div\",{staticClass:\"language-conf line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"DefaultLimitNOFILE=65535\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"2\"}},[a(\"li\",[s._v(\"修改 \"),a(\"code\",[s._v(\"/etc/security/limits.conf\")])])]),s._v(\" \"),a(\"p\",[s._v(\"增加以下两行：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-conf line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"mkasberg hard nofile 65535\\nmkasberg soft nofile 65535\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"3\"}},[a(\"li\",[s._v(\"重启\")])]),s._v(\" \"),a(\"h2\",{attrs:{id:\"问题六\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题六\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"问题六：\")])]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"2020-12-22 10:32:18,751 [cuckoo.core.resultserver] WARNING: Uploaded file length larger than upload_max_size, stopping upload.\")])]),s._v(\" \"),a(\"p\",[s._v(\"修改 \"),a(\"code\",[s._v(\"cuckoo.conf\")]),s._v(\"配置文件，将默认的文件上传最大128MB改为512MB(134217728 Bytes)\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-conf line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"[processing]\\n# Set the maximum size of analyses generated files to process. This is used\\n# to avoid the processing of big files which may take a lot of processing\\n# time. The value is expressed in bytes, by default 128 MB.\\nanalysis_size_limit = 134217728\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"问题七\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题七\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"问题七：\")])]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v('2020-12-22 16:31:25,236 [cuckoo.core.plugins] ERROR: Unable to stop auxiliary module: Sniffer Traceback (most recent call last): File \"/usr/local/lib/python2.7/dist-packages/cuckoo/core/plugins.py\", line 164, in stop module.stop() File \"/usr/local/lib/python2.7/dist-packages/cuckoo/auxiliary/sniffer.py\", line 156, in stop (out, err, faq(\"permission-denied-for-tcpdump\")) CuckooOperationalError: Error running tcpdump to sniff the network traffic during the analysis; stdout = \\'\\' and stderr = \\'tcpdump: vboxnet0: That device is not up\\\\n\\'. Did you enable the extra capabilities to allow running tcpdump as non-root user and disable AppArmor properly (the latter only applies to Ubuntu-based distributions with AppArmor, see also https://cuckoo.sh/docs/faq/index.html#permission-denied-for-tcpdump)?')])]),s._v(\" \"),a(\"p\",[s._v(\"解决方法\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" setcap cap_net_raw,cap_net_admin\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"eip /usr/sbin/tcpdump\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"问题八\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题八\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"问题八：\")])]),s._v(\" \"),a(\"p\",[s._v(\"无界面启动virtualbox出现以下错误：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"2021-04-15 21:54:08,824 [cuckoo.core.scheduler] ERROR: Error starting Virtual Machine! VM: Windows7-SP1, error: VBoxManage failed starting the machine in headless mode. Are you sure your machine is still functioning correctly when trying to use it manually? Error: VBoxManage: error: The VM session was aborted\\nVBoxManage: error: Details: code NS_ERROR_FAILURE (0x80004005), component SessionMachine, interface ISession\\n\\n2021-04-15 21:54:09,438 [cuckoo.core.scheduler] WARNING: Unable to stop machine Windows7-SP1: Trying to stop an already stopped VM: Windows7-SP1\\n2021-04-15 21:54:09,675 [cuckoo.processing.behavior] WARNING: Analysis results folder does not contain any behavior log files.\\n2021-04-15 21:54:11,439 [cuckoo.processing.debug] ERROR: Error processing task #2: it appears that the Virtual Machine hasn't been able to contact back to the Cuckoo Host. There could be a few reasons for this, please refer to our documentation on the matter: https://cuckoo.sh/docs/faq/index.html#troubleshooting-vm-network-configuration\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\")])]),a(\"p\",[a(\"strong\",[s._v(\"解决方法：\")])]),s._v(\" \"),a(\"p\",[s._v(\"在设置中 >> 显示 >> 屏幕 >> 取消勾选硬件加速\")]),s._v(\" \"),a(\"p\",[s._v(\"再次启动虚拟机，以管理员身份运行 agent.pyw，重新生成快照\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"问题九\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题九\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"问题九：\")])]),s._v(\" \"),a(\"p\",[s._v(\"使用cuckoo api批量提交时出现以下错误：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"2021-04-16 11:52:52,854 [cuckoo.core.database] ERROR: Database error counting machines: (sqlite3.OperationalError) database is locked\\n[SQL: SELECT count(*) AS count_1 \\nFROM (SELECT machines.rcparams AS machines_rcparams, machines.id AS machines_id, machines.name AS machines_name, machines.label AS machines_label, machines.ip AS machines_ip, machines.platform AS machines_platform, machines.options AS machines_options, machines.interface AS machines_interface, machines.snapshot AS machines_snapshot, machines.locked AS machines_locked, machines.locked_changed_on AS machines_locked_changed_on, machines.status AS machines_status, machines.status_changed_on AS machines_status_changed_on, machines.resultserver_ip AS machines_resultserver_ip, machines.resultserver_port AS machines_resultserver_port \\nFROM machines \\nWHERE machines.locked = 0) AS anon_1]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\\n\\nOperationalError: (sqlite3.OperationalError) database is locked\\n[SQL: SELECT count(*) AS count_1 \\nFROM (SELECT machines.rcparams AS machines_rcparams, machines.id AS machines_id, machines.name AS machines_name, machines.label AS machines_label, machines.ip AS machines_ip, machines.platform AS machines_platform, machines.options AS machines_options, machines.interface AS machines_interface, machines.snapshot AS machines_snapshot, machines.locked AS machines_locked, machines.locked_changed_on AS machines_locked_changed_on, machines.status AS machines_status, machines.status_changed_on AS machines_status_changed_on, machines.resultserver_ip AS machines_resultserver_ip, machines.resultserver_port AS machines_resultserver_port \\nFROM machines \\nWHERE machines.locked = 0) AS anon_1]\\n(Background on this error at: http://sqlalche.me/e/e3q8)\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\")])]),a(\"p\",[a(\"strong\",[s._v(\"解决方法：将数据库由默认的sqlite更改为postgresql\")])]),s._v(\" \"),a(\"ol\",[a(\"li\",[s._v(\"安装PostgreSQL数据库\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"apt-get\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" postgresql libpq-dev \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-y\")]),s._v(\"\\npip \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" psycopg2\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"2\"}},[a(\"li\",[s._v(\"创建数据库cuckoo\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-u\")]),s._v(\" postgres psql\\nCREATE DATABASE cuckoo\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\nCREATE \"),a(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[s._v(\"USER\")]),s._v(\" cuckoo WITH ENCRYPTED PASSWORD \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'password'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\nGRANT ALL PRIVILEGES ON DATABASE cuckoo TO cuckoo\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"q\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"p\",[s._v(\"后续cuckoo.conf配置需要用到\")]),s._v(\" \"),a(\"p\",[s._v(\"**注意：**密码要带单引号\")]),s._v(\" \"),a(\"ol\",{attrs:{start:\"3\"}},[a(\"li\",[s._v(\"配置 \"),a(\"code\",[s._v(\"/etc/postgresql/10/main/pg_hba.conf\")]),s._v(\"，增加下面一行\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-conf line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"host all    all     192.168.0.2/32      trust\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[a(\"code\",[s._v(\"192.168.0.2\")]),s._v(\"是客户机（物理主机）ip地址\")]),s._v(\" \"),a(\"ol\",{attrs:{start:\"4\"}},[a(\"li\",[s._v(\"配置 \"),a(\"code\",[s._v(\"cuckoo.conf\")]),s._v(\" 文件\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-conf line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"[database]\\n# 不使用默认的sqlite，使用postgresql\\nconnection = postgresql://cuckoo:password@localhost:5432/cuckoo\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"参考资料\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#参考资料\"}},[s._v(\"#\")]),s._v(\" 参考资料\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v('\"pip install m2crypto\" and \"apt-get install python-m2crypto\" ：'),a(\"a\",{attrs:{href:\"https://github.com/cuckoosandbox/cuckoo/issues/1137\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://github.com/cuckoosandbox/cuckoo/issues/1137\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"li\",[s._v(\"Community Download Utility：\"),a(\"a\",{attrs:{href:\"https://cuckoo-sandbox.readthedocs.io/zh_CN/latest/usage/utilities.html#community-download-utility\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://cuckoo-sandbox.readthedocs.io/zh_CN/latest/usage/utilities.html#community-download-utility\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"li\",[s._v(\"多图超详细】从零开始安装配置Cuckoo sandbox并提交样本进行分析：\"),a(\"a\",{attrs:{href:\"https://www.cnblogs.com/BenjaminNL/p/11139517.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://www.cnblogs.com/BenjaminNL/p/11139517.html\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"li\",[s._v(\"iptables持久化方案：\"),a(\"a\",{attrs:{href:\"https://www.cnblogs.com/goldenstones/articles/8868577.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://www.cnblogs.com/goldenstones/articles/8868577.html\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"li\",[s._v(\"解决ubuntu系统 dns覆盖写入127.0.0.53的问题：\"),a(\"a\",{attrs:{href:\"https://blog.csdn.net/evanxuhe/article/details/90229597\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://blog.csdn.net/evanxuhe/article/details/90229597\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"li\",[s._v(\"Cannot Increase open file limit past 4096 (Ubuntu)：\"),a(\"a\",{attrs:{href:\"https://superuser.com/questions/1200539/cannot-increase-open-file-limit-past-4096-ubuntu\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://superuser.com/questions/1200539/cannot-increase-open-file-limit-past-4096-ubuntu\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"li\",[s._v(\"VBoxManage: error: Details: code NS_ERROR_FAILURE (0x80004005), component SessionMachine, interface ISession #5：\"),a(\"a\",{attrs:{href:\"https://github.com/monetate/ectou-export/issues/5\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://github.com/monetate/ectou-export/issues/5\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"li\",[s._v(\"Cuckoo Sandbox Setup for People in a Hurry：\"),a(\"a\",{attrs:{href:\"https://hatching.io/blog/cuckoo-sandbox-setup/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://hatching.io/blog/cuckoo-sandbox-setup/\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"li\",[s._v('FATA：no pg_hba.conf entry for host \"192.168.113.1\"，user \"postgres\"，database \"postgres\"，SSL off：'),a(\"a\",{attrs:{href:\"https://blog.csdn.net/qq_32596527/article/details/83626617?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.control&dist_request_id=&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.control\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://blog.csdn.net/qq_32596527/article/details/83626617?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control&dist_request_id=&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control\"),a(\"OutboundLink\")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);","extractedComments":[]}