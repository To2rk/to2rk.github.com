{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{564:function(s,a,t){\"use strict\";t.r(a);var e=t(7),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[t(\"blockquote\",[t(\"p\",[s._v(\"系统：CentOS 7\"),t(\"br\"),s._v(\"\\nWEB环境：LNMP搭建\")])]),s._v(\" \"),t(\"h2\",{attrs:{id:\"问题一\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题一\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"问题一：\")])]),s._v(\" \"),t(\"p\",[t(\"code\",[s._v(\"PHP 的设置似乎有问题, 无法获取系统环境变量. 使用 getenv(\\\\”PATH\\\\”) 测试时仅返回空结果.\")])]),s._v(\" \"),t(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"在PHP-FPM配置文件：\"),t(\"code\",[s._v(\"/usr/local/php/etc/php-fpm.conf\")]),s._v(\" 最后加上一句：\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"env\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),t(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[s._v(\"PATH\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" /usr/local/bin:/usr/bin:/bin:/usr/local/php/bin\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"问题二\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题二\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"问题二：\")])]),s._v(\" \"),t(\"p\",[t(\"code\",[s._v('未找到 PHP 的 \"fileinfo\" 模块。强烈推荐启用该模块，从而获得更好的 MIME 类型探测结果。')])]),s._v(\" \"),t(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"情况一-未安装lnmp环境\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#情况一-未安装lnmp环境\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"情况一：未安装LNMP环境\")])]),s._v(\" \"),t(\"ol\",[t(\"li\",[t(\"p\",[s._v(\"找到 \"),t(\"code\",[s._v(\"/root/lnmp1.5/include/php.sh\")]),s._v(\" 文件\")])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"将\"),t(\"code\",[s._v(\"php.sh\")]),s._v(\"中的 \"),t(\"code\",[s._v(\"with_fileinfo='--disable-fileinfo'\")]),s._v(\" 改为 \"),t(\"code\",[s._v(\"with_fileinfo='--enable-fileinfo'\")])])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"再执行安装脚本\")])])]),s._v(\" \"),t(\"h3\",{attrs:{id:\"情况二-已经安装了lnmp环境\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#情况二-已经安装了lnmp环境\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"情况二：已经安装了LNMP环境\")])]),s._v(\" \"),t(\"p\",[s._v(\"LNMP1.5以上版本\")]),s._v(\" \"),t(\"p\",[s._v(\"修改lnmp安装包目录下的 \"),t(\"code\",[s._v(\"lnmp.conf\")]),s._v(\" 文件，将\"),t(\"code\",[s._v(\"Enable_PHP_Fileinfo=’n’\")]),s._v(\" 中的n改成y保存，再执行 \"),t(\"code\",[s._v(\"./upgrade.sh php\")]),s._v(\" 升级PHP就会安装好fileinfo模块。（无论哪个版本的LNMP，建议还是使用下面这种方式，因为用这种方式把我网站都搞炸了，虽然我也不知道原因）\")]),s._v(\" \"),t(\"p\",[s._v(\"LNMP1.4及以下\")]),s._v(\" \"),t(\"ol\",[t(\"li\",[s._v(\"解压已安装的PHP版本\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"tar\")]),s._v(\" -jxvf /root/lnmp1.5/src/php-7.0.30.tar.bz2\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"2\"}},[t(\"li\",[s._v(\"进入解压目录执行命令\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /root/lnmp1.5/src/php-7.0.30/ext/fileinfo/\\n/usr/local/php/bin/phpize\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"3\"}},[t(\"li\",[s._v(\"编译和安装\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"./configure --with-php-config\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"/usr/local/php/bin/php-config\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"make\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"&&\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"make\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"5\"}},[t(\"li\",[s._v(\"修改 \"),t(\"code\",[s._v(\"/usr/local/php/etc/\")]),s._v(\" 目录下的 \"),t(\"code\",[s._v(\"php.ini\")])])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vim\")]),s._v(\" /usr/local/php/etc/php.ini\\n    \\n第一行加上：\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"extension\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"fileinfo.so\"')]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"问题三\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题三\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"问题三：\")])]),s._v(\" \"),t(\"p\",[t(\"code\",[s._v(\"内存缓存未配置，为了提升使用体验，请尽量配置内存缓存\")])]),s._v(\" \"),t(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),t(\"ol\",[t(\"li\",[s._v(\"安装\"),t(\"code\",[s._v(\"APCu\")])])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /root/lnmp1.5\\n./addons.sh \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" apcu\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"2\"}},[t(\"li\",[s._v(\"安装完成后编辑 \"),t(\"code\",[s._v(\"/home/wwwroot/cloud.yourdomain.com/config/config.php\")]),s._v(\" 文件，加上\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-php line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token string single-quoted-string\"}},[s._v(\"'memcache.local'\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=>\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string single-quoted-string\"}},[s._v(\"'\\\\OC\\\\Memcache\\\\APCu'\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"问题四\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题四\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"问题四：\")])]),s._v(\" \"),t(\"p\",[t(\"code\",[s._v(\"PHP 的 OPcache 模块未载入。推荐开启获得更好的性能。\")])]),s._v(\" \"),t(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),t(\"ol\",[t(\"li\",[s._v(\"安装OPcahe\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /root/lnmp1.5\\n./addons.sh \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" opcache\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"2\"}},[t(\"li\",[s._v(\"配置OPcahe\")])]),s._v(\" \"),t(\"p\",[s._v(\"LNMP1.4后，添加扩展已经不再修改php.ini，而是单独的 \"),t(\"code\",[s._v(\"/usr/local/php/conf.d/004-opcache.ini\")]),s._v(\"，nextcloud推荐配置如下\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-ini line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-ini\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token selector\"}},[s._v(\"[Zend Opcache]\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[s._v(\"zend_extension\")]),t(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),s._v('\"opcache.so\"')]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[s._v(\"opcache.memory_consumption\")]),t(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),s._v(\"128\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[s._v(\"opcache.interned_strings_buffer\")]),t(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),s._v(\"8\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[s._v(\"opcache.max_accelerated_files\")]),t(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),s._v(\"10000\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[s._v(\"opcache.revalidate_freq\")]),t(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),s._v(\"1\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[s._v(\"opcache.fast_shutdown\")]),t(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),s._v(\"1\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[s._v(\"opcache.enable_cli\")]),t(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),s._v(\"1\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[s._v(\"opcache.save_comments\")]),t(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),s._v(\"1\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"问题五\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题五\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"问题五：\")])]),s._v(\" \"),t(\"p\",[t(\"code\",[s._v(\"该实例缺失了一些推荐的PHP模块。为提高性能和兼容性，我们强烈建议安装它们。imagick\")])]),s._v(\" \"),t(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),t(\"ol\",[t(\"li\",[s._v(\"安装ImageMagick\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"yum \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" ImageMagick-devel\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /root/lnmp1.5\\n./addons.sh \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" imageMagick\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"2\"}},[t(\"li\",[s._v(\"修改 \"),t(\"code\",[s._v(\"/usr/local/php/etc/php.ini\")]),s._v(\"，第一行加上：\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-ini line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-ini\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[s._v(\"extension\")]),t(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),s._v('\"imagick.so\"')]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"问题六\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题六\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"问题六：\")])]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"https://conimi.com/files/images/screenshots/nextcloud-problem-occ-db-convert-filecache-bigint.png\",alt:\"nextcloud-problem-occ db:convert-filecache-bigint\"}})]),s._v(\" \"),t(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /home/wwwroot/cloud.yourdomain.com/\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" -u www php occ db:convert-filecache-bigint\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"p\",[s._v(\"其中\"),t(\"code\",[s._v(\"www是网站用户名\")]),s._v(\"，视情况而定，\"),t(\"code\",[s._v(\"ls -l\")]),s._v(\" 可以查看用户名和用户组\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"问题七\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题七\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"问题七：\")])]),s._v(\" \"),t(\"p\",[t(\"code\",[s._v(\"PHP内存限制低于建议值512MB.\")])]),s._v(\" \"),t(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),t(\"p\",[s._v(\"编辑 \"),t(\"code\",[s._v(\"/usr/local/php/etc/php.ini\")]),s._v(\"，将memory_limit改为512M\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-ini line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-ini\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[s._v(\"memory_limit\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),s._v(\" 512M\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"问题八\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题八\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"问题八：\")])]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"https://conimi.com/files/images/screenshots/nextcloud-problem-add-http-header.png\",alt:\"nextcloud-problem-add-http-header\"}})]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"https://conimi.com/files/images/screenshots/nextcloud-problem-add-http-header-no-referrer.png\",alt:\"extcloud-problem-add-http-header-no-referrer\"}})]),s._v(\" \"),t(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),t(\"p\",[s._v(\"这五个header的问题是由重复配置造成的，在 \"),t(\"code\",[s._v(\"/usr/local/nginx/conf/vhost/cloud.yourdomain.conf\")]),s._v(\" 中把这些注释掉即可。\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"问题九\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题九\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"问题九：\")])]),s._v(\" \"),t(\"p\",[t(\"code\",[s._v('HTTP的请求头 \"Strict-Transport-Security\" 未设置为至少 \"15552000\" 秒. 为了提高安全性，建议参照security tips ↗中的说明启用HSTS.')])]),s._v(\" \"),t(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),t(\"p\",[s._v(\"在 \"),t(\"code\",[s._v(\"/usr/local/nginx/conf/vhost/www.cloud.yourdomain.conf\")]),s._v(\" 中添加以下代码\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"add_header Strict-Transport-Security \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"max-age=15768000;preload;\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"问题十\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题十\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"问题十：\")])]),s._v(\" \"),t(\"p\",[t(\"code\",[s._v(\"一些文件没有通过完整性检查。了解如何解决该问题请查看我们的 文档。(无效文件列表… / 重新扫描…)\")])]),s._v(\" \"),t(\"p\",[s._v(\"解决方法：\")]),s._v(\" \"),t(\"p\",[s._v(\"暂时没有解决\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"参考资料\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#参考资料\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"参考资料：\")])]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"LNMP一键环境安装Fileinfo扩展组件支持的办法：\"),t(\"a\",{attrs:{href:\"http://www.laozuo.org/11801.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"http://www.laozuo.org/11801.html\"),t(\"OutboundLink\")],1)]),s._v(\" \"),t(\"li\",[s._v(\"最新 LNMP1.5 搭建 NEXTCLOUD 私有云盘并配置 aria2c 下载：\"),t(\"a\",{attrs:{href:\"https://yalv.me/lnmp-nextcloud-aria2c/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://yalv.me/lnmp-nextcloud-aria2c/\"),t(\"OutboundLink\")],1)]),s._v(\" \"),t(\"li\",[s._v(\"centos安装php扩展 imagick 报错：\"),t(\"a\",{attrs:{href:\"https://www.shiqidu.com/d/367\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://www.shiqidu.com/d/367\"),t(\"OutboundLink\")],1)]),s._v(\" \"),t(\"li\",[s._v(\"nextcloud官方文档：\"),t(\"a\",{attrs:{href:\"https://docs.nextcloud.com/server/15/admin_manual/configuration_database/bigint_identifiers.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://docs.nextcloud.com/server/15/admin_manual/configuration_database/bigint_identifiers.html\"),t(\"OutboundLink\")],1)]),s._v(\" \"),t(\"li\",[s._v(\"私有云NextCould + Caddy 的快速搭建：\"),t(\"a\",{attrs:{href:\"https://canmipai.com/index.php/2018/06/29/nextcould-caddy-setup/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://canmipai.com/index.php/2018/06/29/nextcould-caddy-setup/\"),t(\"OutboundLink\")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);","extractedComments":[]}