{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{571:function(t,s,n){\"use strict\";n.r(s);var a=n(7),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[n(\"h2\",{attrs:{id:\"_0x00-环境准备-nginx安装了lua模块\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x00-环境准备-nginx安装了lua模块\"}},[t._v(\"#\")]),t._v(\" 0x00 环境准备，nginx安装了lua模块\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[t._v(\"可先按照以下方式编译安装lua模块\")]),t._v(\" \"),n(\"li\",[t._v(\"Docker源码编译Nginx[可指定模块]：\"),n(\"a\",{attrs:{href:\"https://conimi.com/archives/109\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"https://conimi.com/archives/109\"),n(\"OutboundLink\")],1)]),t._v(\" \"),n(\"li\",[t._v(\"目录结构遵循上篇博客：Docker源码编译Nginx[可指定模块]\")])]),t._v(\" \"),n(\"h2\",{attrs:{id:\"_0x01-下载ngx-metric\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x01-下载ngx-metric\"}},[t._v(\"#\")]),t._v(\" 0x01 下载ngx_metric\")]),t._v(\" \"),n(\"p\",[t._v(\"ngx_metric地址：https://github.com/GuyCheung/falcon-ngx_metric\")]),t._v(\" \"),n(\"p\",[t._v(\"nginx目录下文件结构应为，只增加了\"),n(\"code\",[t._v(\"falcon-ngx_metric\")]),t._v(\"文件夹\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[t._v(\"nginx\\n    - conf.d\\n    - falcon-ngx_metric\\n    -- lua\\n        --- ngx_metric\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"还有其它文件，不列出了\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n        *** ngx_metric.lua\\n        *** ngx_metric_output.lua\\n    ** ngx_metric.conf\\n    ** nginx_collect.py\\n    - log\\n    * Dockerfile\\n    * nginx.conf\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 约定：\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"#    - 表示目录\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"#    * 表示文件\")]),t._v(\"\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"16\")]),n(\"br\")])]),n(\"h2\",{attrs:{id:\"_0x02-修改dockerfile\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x02-修改dockerfile\"}},[t._v(\"#\")]),t._v(\" 0x02 修改Dockerfile\")]),t._v(\" \"),n(\"p\",[t._v(\"由于需要python环境，所以安装python\")]),t._v(\" \"),n(\"p\",[t._v(\"Dockerfile内容如下\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-dockerfile line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-dockerfile\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"FROM\")]),t._v(\" debian\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"10.2\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"slim\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" maintainer=\"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"info@fabiocicerchia.it\"')]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" Author=\"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"https://github.com/fabiocicerchia/nginx-lua/blob/master/nginx/1.18.0/debian/10.2-slim\"')]),t._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ARG\")]),t._v(\" BUILD_DATE\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ARG\")]),t._v(\" BUILD_VERSION\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ARG\")]),t._v(\" VCS_REF\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" org.label\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"schema.schema\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"version=\"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"1.0\"')]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" org.label\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"schema.build\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"date=$BUILD_DATE\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" org.label\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"schema.name=\"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"fabiocicerchia/nginx-lua\"')]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" org.label\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"schema.description=\"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"Nginx 1.18.0 with LUA support based on debian 10.2-slim.\"')]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" org.label\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"schema.url=\"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"https://github.com/fabiocicerchia/nginx-lua\"')]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" org.label\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"schema.vcs\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"url=\"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"https://github.com/fabiocicerchia/nginx-lua\"')]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" org.label\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"schema.vcs\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"ref=$VCS_REF\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" org.label\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"schema.version=$BUILD_VERSION\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"LABEL\")]),t._v(\" org.label\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"schema.docker.cmd=\"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"docker run -p 80:80 -d fabiocicerchia/nginx-lua:1.18.0-debian10.2-slim\"')]),t._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# https://github.com/openresty/luajit2\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" VER_LUAJIT 2.1\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"20200102\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# https://github.com/openresty/lua-nginx-module\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# Production ready.\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" VER_LUA_NGINX_MODULE 0.10.15\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# https://github.com/openresty/lua-resty-core\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# This library is production ready.\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" VER_LUA_RESTY_CORE 0.1.17\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" LUA_LIB_DIR /usr/local/share/lua/5.1\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# https://github.com/openresty/lua-resty-lrucache\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# This library is considered production ready.\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" VER_LUA_RESTY_LRUCACHE 0.09\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# https://github.com/nginx/nginx\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" VER_NGINX 1.18.0\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# https://github.com/vision5/ngx_devel_kit\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# The NDK is now considered to be stable.\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" VER_NGX_DEVEL_KIT 0.3.1\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# https://github.com/Yelp/dumb-init\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" VER_DUMBINIT 1.2.2\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" LUAJIT_LIB /usr/local/lib\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" LUAJIT_INC /usr/local/include/luajit\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"2.1\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" LD_LIBRARY_PATH /usr/local/lib/\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"$LD_LIBRARY_PATH\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENV\")]),t._v(\" DEBIAN_FRONTEND noninteractive\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"RUN\")]),t._v(\" set \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"x \\\\\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get update \\\\\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get install \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"y \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"install\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"recommends \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"install\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"suggests \\\\\\n    ca\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"certificates \\\\\\n    libgeoip\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"dev \\\\\\n    libpcre3\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"dev \\\\\\n    libssl\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"dev \\\\\\n    zlib1g\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"dev \\\\\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get install \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"y \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"install\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"recommends \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"install\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"suggests \\\\\\n    curl \\\\\\n    g++ \\\\\\n    gzip \\\\\\n    make \\\\\\n    tar \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"## 添加的python和pip环境\")]),t._v(\"\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get install \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"y \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"install\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"recommends \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"install\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"suggests \\\\\\n    python2.7 \\\\\\n    python\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"pip \\\\\\n&& pip2 install requests \\\\\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get remove \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"y python\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"pip \\\\\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get autoremove \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"y  \\\\\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get autoclean \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"y  \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# OpenResty LUAJIT2\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# ##############################################################################\")]),t._v(\"\\n&& curl \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"Lo /luajit.tar.gz https\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"//github.com/openresty/luajit2/archive/v$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUAJIT\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\".tar.gz \\\\\\n    && tar xvzf /luajit.tar.gz && rm /luajit.tar.gz \\\\\\n    && cd /luajit2\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUAJIT\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n    && make \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"j \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"$(nproc)\"')]),t._v(\" \\\\\\n    && make install \\\\\\n    && cd / \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# LUA Resty Core\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# ##############################################################################\")]),t._v(\"\\n&& curl \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"Lo /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"core.tar.gz https\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"//github.com/openresty/lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"core/archive/v$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUA_RESTY_CORE\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\".tar.gz \\\\\\n    && tar xvzf /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"core.tar.gz && rm /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"core.tar.gz \\\\\\n    && cd /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"core\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUA_RESTY_CORE\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n    && make \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"j \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"$(nproc)\"')]),t._v(\" \\\\\\n    && make install \\\\\\n    && cd / \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# LUA Resty LRUCache\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# ##############################################################################\")]),t._v(\"\\n&& curl \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"Lo /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"lrucache.tar.gz https\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"//github.com/openresty/lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"lrucache/archive/v$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUA_RESTY_LRUCACHE\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\".tar.gz \\\\\\n    && tar xvzf /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"lrucache.tar.gz && rm /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"lrucache.tar.gz \\\\\\n    && cd /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"lrucache\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUA_RESTY_LRUCACHE\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n    && make \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"j \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"$(nproc)\"')]),t._v(\" \\\\\\n    && make install \\\\\\n    && cd / \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# NGX Devel Kit\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# ##############################################################################\")]),t._v(\"\\n&& curl \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"Lo /ngx_devel_kit.tar.gz https\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"//github.com/vision5/ngx_devel_kit/archive/v$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_NGX_DEVEL_KIT\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\".tar.gz \\\\\\n    && tar xvzf /ngx_devel_kit.tar.gz && rm /ngx_devel_kit.tar.gz \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# Lua Nginx Module\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# ##############################################################################\")]),t._v(\"\\n&& curl \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"Lo /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"nginx.tar.gz https\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"//github.com/openresty/lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"nginx\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"module/archive/v$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUA_NGINX_MODULE\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\".tar.gz \\\\\\n    && tar xvzf /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"nginx.tar.gz && rm /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"nginx.tar.gz \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# NGINX\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# ##############################################################################\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# create nginx user/group first, to be consistent throughout docker variants\")]),t._v(\"\\n&& addgroup \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"system \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"gid 32548 nginx \\\\\\n&& adduser \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"system \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"disabled\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"login \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"ingroup nginx \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"create\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"home \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"home /nonexistent \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"gecos \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"nginx user\"')]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"shell /bin/false \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"uid 32548 nginx \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# we're on an architecture upstream doesn't officially build for\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# let's build binaries from the published packaging sources\")]),t._v(\"\\n    && curl \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"Lo /nginx.tar.gz https\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"//nginx.org/download/nginx\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_NGINX\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\".tar.gz \\\\\\n    && tar xvzf /nginx.tar.gz && rm /nginx.tar.gz \\\\\\n    && cd /nginx\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_NGINX\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n    && mkdir \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"p /var/cache/nginx/client_temp \\\\\\n        /var/cache/nginx/proxy_temp \\\\\\n        /var/cache/nginx/fastcgi_temp \\\\\\n        /var/cache/nginx/uwsgi_temp \\\\\\n        /var/cache/nginx/scgi_temp \\\\\\n    && ./configure \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"prefix=/etc/nginx \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"sbin\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/usr/sbin/nginx \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"modules\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/usr/lib/nginx/modules \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"conf\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/etc/nginx/nginx.conf \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"error\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"log\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/var/log/nginx/error.log \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"log\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/var/log/nginx/access.log \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"pid\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/var/run/nginx.pid \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"lock\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/var/run/nginx.lock \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"client\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"body\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"temp\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/var/cache/nginx/client_temp \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"proxy\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"temp\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/var/cache/nginx/proxy_temp \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"fastcgi\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"temp\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/var/cache/nginx/fastcgi_temp \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"uwsgi\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"temp\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/var/cache/nginx/uwsgi_temp \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"scgi\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"temp\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"path=/var/cache/nginx/scgi_temp \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"user=nginx \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"group=nginx \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"compat \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"file\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"aio \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"threads \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_addition_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_auth_request_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_dav_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_flv_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_gunzip_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_gzip_static_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_mp4_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_random_index_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_realip_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_secure_link_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_slice_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_ssl_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_stub_status_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_sub_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_v2_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"mail \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"mail_ssl_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"stream \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"stream_realip_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"stream_ssl_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"stream_ssl_preread_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"cc\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"opt=\"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'-g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fPIC'\")]),t._v(\" \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"ld\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"opt=\"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'-Wl,-z,relro -Wl,-z,now -Wl,--as-needed -pie'\")]),t._v(\" \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"add\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"module=/lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"nginx\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"module\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUA_NGINX_MODULE\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"add\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"module=/ngx_devel_kit\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_NGX_DEVEL_KIT\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_dav_module \\\\\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"with\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"http_geoip_module \\\\\\n    && make \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"j \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"$(nproc)\"')]),t._v(\" build \\\\\\n    && make install \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# Bring in tzdata so users could set the timezones through the environment\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# variables\")]),t._v(\"\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get install \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"y \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"install\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"recommends \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"install\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"suggests tzdata \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# Bring in curl and ca-certificates to make registering on DNS SD easier\")]),t._v(\"\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get install \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"y \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"install\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"recommends \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"no\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"install\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"suggests curl ca\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"certificates \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# forward request and error logs to docker log collector\")]),t._v(\"\\n&& ln \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"sf /dev/stdout /var/log/nginx/access.log \\\\\\n&& ln \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"sf /dev/stderr /var/log/nginx/error.log \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# dumb-init\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# ##############################################################################\")]),t._v(\"\\n&& curl \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"Lo /usr/bin/dumb\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"init https\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"//github.com/Yelp/dumb\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"init/releases/download/v$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_DUMBINIT\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"/dumb\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"init_$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_DUMBINIT\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"_x86_64 \\\\\\n&& chmod +x /usr/bin/dumb\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"init \\\\\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# Cleanup\")]),t._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# ##############################################################################\")]),t._v(\"\\n&& rm \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"rf /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"nginx\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"module\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUA_NGINX_MODULE\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n&& rm \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"rf /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"core\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUA_RESTY_CORE\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n&& rm \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"rf /lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"resty\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"lrucache\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUA_RESTY_LRUCACHE\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n&& rm \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"rf /luajit2\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_LUAJIT\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n&& rm \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"rf /nginx\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_NGINX\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n&& rm \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"rf /ngx_devel_kit\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"$\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"VER_NGX_DEVEL_KIT\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \\\\\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get autoremove \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"y \\\\\\n&& apt\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"get remove \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"y \\\\\\n    curl \\\\\\n    g++ \\\\\\n    make \\\\\\n&& rm \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"rf /var/lib/apt/lists/*\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"HEALTHCHECK\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"interval=30s \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"timeout=3s CMD curl \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"fail http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"//localhost/ \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"|\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"|\")]),t._v(\" exit 1\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"EXPOSE\")]),t._v(\" 80\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"EXPOSE\")]),t._v(\" 443\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"STOPSIGNAL\")]),t._v(\" SIGTERM\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"ENTRYPOINT\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"dumb-init\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"CMD\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"nginx\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"-g\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"daemon off;\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"30\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"31\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"32\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"33\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"34\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"35\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"36\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"37\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"38\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"39\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"40\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"41\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"42\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"43\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"44\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"45\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"46\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"47\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"48\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"49\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"50\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"51\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"52\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"53\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"54\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"55\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"56\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"57\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"58\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"59\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"60\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"61\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"62\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"63\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"64\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"65\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"66\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"67\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"68\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"69\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"70\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"71\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"72\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"73\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"74\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"75\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"76\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"77\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"78\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"79\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"80\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"81\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"82\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"83\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"84\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"85\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"86\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"87\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"88\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"89\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"90\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"91\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"92\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"93\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"94\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"95\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"96\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"97\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"98\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"99\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"100\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"101\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"102\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"103\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"104\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"105\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"106\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"107\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"108\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"109\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"110\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"111\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"112\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"113\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"114\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"115\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"116\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"117\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"118\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"119\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"120\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"121\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"122\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"123\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"124\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"125\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"126\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"127\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"128\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"129\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"130\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"131\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"132\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"133\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"134\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"135\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"136\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"137\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"138\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"139\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"140\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"141\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"142\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"143\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"144\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"145\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"146\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"147\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"148\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"149\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"150\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"151\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"152\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"153\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"154\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"155\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"156\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"157\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"158\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"159\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"160\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"161\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"162\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"163\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"164\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"165\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"166\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"167\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"168\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"169\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"170\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"171\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"172\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"173\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"174\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"175\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"176\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"177\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"178\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"179\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"180\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"181\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"182\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"183\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"184\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"185\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"186\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"187\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"188\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"189\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"190\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"191\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"192\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"193\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"194\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"195\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"196\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"197\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"198\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"199\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"200\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"201\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"202\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"203\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"204\")]),n(\"br\")])]),n(\"h2\",{attrs:{id:\"_0x03-编写docker-comopose文件\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x03-编写docker-comopose文件\"}},[t._v(\"#\")]),t._v(\" 0x03 编写docker-comopose文件\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-docker line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-docker\"}},[n(\"code\",[t._v(\"version\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"3.7\"')]),t._v(\"\\n\\nservices\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    nginx\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n        build\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            context\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" .\\n            dockerfile\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" compose/nginx/Dockerfile\\n        restart\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" always\\n        container_name\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" nginx\\n        volumes\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" ./wwwroot/demo\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"/home/wwwroot\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" ./compose/nginx/conf.d\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"/etc/nginx/conf.d\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" ./compose/nginx/nginx.conf\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"/etc/nginx/nginx.conf\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" ./compose/nginx/log\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"/var/log/nginx\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 安装ngx_metric\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 这里由于容器内不存在modules文件夹，所以可以直接映射，\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 如果容器内存在moduls文件夹且还要其它文件，那么这里就需要将lua文件夹下的内容一个一个文件映射\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" ./compose/nginx/falcon\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"ngx_metric/lua\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"/etc/nginx/modules\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" ./compose/nginx/falcon\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"ngx_metric/ngx_metric.conf\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"/etc/nginx/conf.d/ngx_metric.conf\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" ./compose/nginx/falcon\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"ngx_metric/nginx_collect.py\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"/opt/nginx_collect.py\\n\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 需要注意：主机文件挂载到容器内存在几种形式\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 1. 用主机内的文件替换容器内的文件，比如容器内存在nginx.conf，主机内也存在nginx.conf，\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 这时需要用容器的文件代替主机文件，./compose/nginx/nginx.conf:/etc/nginx/nginx.conf就会覆盖容器内的原有文件\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 2. 将主机文件夹下的文件全部挂载到容器内，比如将主机内的/home/wwwroot/demo下的所有文件映射到容器，\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 这时./wwwroot/demo:/home/wwwroot就会在容器内创建一个/home/wwwroot文件夹，主机demo文件夹内的所有文件都会映射到容器/home/wwwroot文件夹下\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 3. 将容器内的文件夹挂载到主机，比如容器内/var/log/nginx文件下的日志文件会全部映射到主机./compose/nginx/log文件夹下\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 4. 将主机内的文件挂载到容器内，即使容器内不存在需要挂载的文件，比如：容器内/etc/nginx/conf.d/文件夹下不存在ngx_metric.conf,\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 但也要注意要写出容器内的文件名，./compose/nginx/falcon-ngx_metric/ngx_metric.conf:/etc/nginx/conf.d/ngx_metric.conf，\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# 两边都有ngx_metric.conf文件名\")]),t._v(\"\\n\\n        ports\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"80:80\"')]),t._v(\"\\n\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# command: \")]),t._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"#     - bash\")]),t._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"#     - -c\")]),t._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"#     - |\")]),t._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"#         sleep 20s\")]),t._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"#         python2.7 /opt/nginx_collect.py --format=falcon --falcon-addr=http://116.62.39.165:1988/v1/push --service=ok_nginx\")]),t._v(\"\\n\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# --falcon-addr 为agent地址\")]),t._v(\"\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"30\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"31\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"32\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"33\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"34\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"35\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"36\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"37\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"38\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"39\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"40\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"41\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"42\")]),n(\"br\")])]),n(\"h2\",{attrs:{id:\"_0x04-添加定时命令-自动推送\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x04-添加定时命令-自动推送\"}},[t._v(\"#\")]),t._v(\" 0x04 添加定时命令，自动推送\")]),t._v(\" \"),n(\"p\",[t._v(\"运行命令\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[t._v(\"    python2.7 /opt/nginx_collect.py --format\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"falcon --use-ngx-host --falcon-addr\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"http://116.62.39.165:1988/v1/push\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\")])]),n(\"p\",[t._v(\"参数说明\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"# Github地址：https://github.com/GuyCheung/falcon-ngx_metric\")]),t._v(\"\\n\\n--use-ngx-host: 使用nginx配置里的service_name作为采集项的endpoint\\n\\n--service: 手动设置endpoint值，当指定--use-ngx-host时，该参数无效\\n\\n--format: 采集数据输出格式，对接falcon请使用--format\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"falcon\\n\\n--falcon-step: falcon step设置，请设置为python脚本调用频率，默认是60\\n\\n--falcon-addr: falcon push接口设置，设置该参数数据直接推送，不再输出到终端。需要安装requests模块\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),n(\"br\")])])])}),[],!1,null,null,null);s.default=e.exports}}]);","extractedComments":[]}